# 组合优化期中考试内容复习

## 题目一

考虑下面的设施选址问题。有n个小区需要某种##服务，有m处地点可以用于开设服务点。在地点i开设服务点所需要的开设费用为$f_i$,设置在地点i的服务点为小区j提供服务所需要的运营费用为$c_{ij}$.现在需要选择若干地点开设服务点，并确定每一个服务点的服务对象，使得每个小区至少有一个服务点为其提供服务，并且总费用最小。试着写出该问题数学规划。
$$
x_{ij}=\begin{cases}
1\ 如果地点i的服务点为小区j提供服务\\
0\ 其它
\end{cases}
$$

$$
min\ \sum_{i=1}^m(\sum_{j=1}^nx_{ij})f_i+\sum_{i=1}^m\sum_{j=1}^nx_{ij}c_{ij}
$$

满足：

1.每个小区都至少有1个服务点

2.每个地点最多开1个服务点服务1个小区

因此满足：
$$
\sum_{i=1}^mx_{ij}\geq 1\\\sum_{j=1}^nx_{ij}\leq 1
$$


## 题目二

某航空公司计划在全国选若干个机场组建基地。假设在机场j组建基地所需要的费用是$c_j,j=1,...,n$. 如果这个航空公司在i与j都有基地，那么就可以开通往返两地的航班并获得票款收益$r_{ij},1\leq i<j \leq n$.这个航空公司基地组建费用预算上限为B，应该选择哪些机场组建基地才能使得获取的票款收益最大。写出数学规划
$$
u_{i}=\begin{cases}

1\ 如果第i个机场开设了基地\\

0\ 其它

\end{cases}
$$
这里的关键是我们要最大化的东西，我们要最大化票款收益

$max:\sum_{i=1}^n\sum_{j=1,j>i}^nr_{ij}u_iu_j-\sum_{j=1}^nc_iu_i$

s.t.
$$
\sum_{i=1}^nc_iu_i\leq B\\
u_i\in\{0,1\}
$$

## 题目三

现在有n个Boolean变量$x_1,x_2,...,x_n$的一个合取范式$F=c_1\cap c_2 \cap ... \cap c_m$,其中子句$c_i$为若干个文字的析取范式，$c_i$的权为$w_i,i=1,...,m$.求所有变量的一组赋值，使得值为真的子句的权之和最大的问题称为**MAX-SAT**问题

1.写出**MAX-SAT**问题的数学规划：

这里对于子句的规划需要用2个变量来控制，而同时因为ci为合取，只需要ci中有一个真那么ci就是真。

此时规划变量超级多，这是一个套路。
$$
a_{ij}=\begin{cases}1\ 如果c_i含有x_j\\0\ 其它\end{cases}\\
b_{ij}=\begin{cases}1\ 如果c_i含有\bar{x_j}\\0\ 其它\end{cases}\\
y_{i}=\begin{cases}1\ 如果x_i取真\\0\ 其它\end{cases}\\
z_{i}=\begin{cases}1\ 如果c_i可满足\\0\ 其它\end{cases}\\
max:\sum_{i=1}^{m}w_iz_i
$$
3.F 的每个子句最多含有2个文字的MAX-SAT问题为2MAX-SAT问题，证明它是NP完全问题。

首先证明NP：

1.得出一个可行解是简单的，任意就可以了

2.可行解规模不超过实例规模多项式。

这是显然的

3.多项式时间内验证 ok

再证明NP-完全

**写成判定形式**

给定一个每个子句最多含2个文字的合取范式（CNF），以及每一个子句的权与阈值B，问是否存在变量的一个赋值，使得取值为真的子句的权之和大于B

如何从3SAT归约：

证明$3SAT\leq _m^p MAX-2SAT$

利用第二题的结论：

对于$x,y,z,w$为Boolean变量，取3SAT的子句为

$C_i=x\cap y\cap z$

取变量w，使得

$C_i'=x\cup y\cup z \cup w \cup ....$即第二问中有的。

我们证明：

如果存在一个赋值，使得$C_i=1$，那么存在w的一个赋值，使得$C_i'$恰好7个子句为1

当有一个赋值使得$C_i=0$，那么不管怎样赋值，$C_i'$最多6个子句为1

取3SAT的实例：

每个子句都为3个文字的析取，构造MAX-2SAT的实例如上构造。

证明MAX-2SAT取值为真的子句权之和=7m当且仅当存在一个文字的一种赋值，使得变量为真。

首先如果存在一种赋值的话，我们如上面给w赋值，那么就存在每一个部分7个子句为1，那么取值为真的子句权之和也就$\geq 7m$了

如果取值为真的权$\geq 7m$，如上第二个结论，可知此时无论怎么赋权都小于7，那么此时每一个子句取真的子句都是7，那么不可能有$C_i=0$，也就是说此时针对这个实例的3SAT问题答案是是。



如何证明NP-Hard：

ANP-Hard，找一个B是NP-Hard。从B的一个实例构造A的一个实例，证明如果能解决A 问题的这个实例，那么B问题的这个实例也能解决。

比如这里A的实例是从3SAT构造的。然后我们A的问题是存不存在大于等于7m的一个判断。如果存在的话，我们可以得到B问题的答案是真。同时B问题答案是真也是存在。这样如果能解决A问题的实例，B问题实例也能解决了。

